<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOCMATE - Smart Reading Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Michroma:wght@400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Left Navigation Sidebar -->
    <nav class="nav-sidebar" id="navSidebar">
        <div class="nav-icon active" onclick="showSection('home')" title="Home">
            <i class="fas fa-home"></i>
        </div>
        <div class="nav-divider"></div>
        <div class="nav-icon" onclick="showSection('library')" title="Library">
            <i class="fas fa-book"></i>
        </div>
        <div class="nav-divider"></div>
        <div class="nav-icon" onclick="showSection('saved-notes')" title="Saved Notes">
            <i class="fas fa-save"></i>
        </div>
        <div class="nav-divider"></div>
        <div class="nav-icon" onclick="showSection('audio-library')" title="Audio Notes">
            <i class="fas fa-headphones"></i>
        </div>
        <div class="nav-divider"></div>
        <div class="nav-icon" onclick="showSection('analysis')" title="Analysis">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="nav-divider"></div>
        <div class="nav-icon" onclick="showSection('camera')" title="Camera">
            <i class="fas fa-camera"></i>
        </div>
    </nav>

    <!-- Top Controls Bar -->
    <header class="top-controls">
        <div class="logo-section">
            <i class="fas fa-file-alt logo-icon"></i>
            <h1 class="logo-text">DOCMATE</h1>
            <div class="quiz-icon" onclick="showQuiz()" title="Quiz">
                <i class="fas fa-question-circle"></i>
            </div>
        </div>
        <div class="controls-section">
            <select id="languageSelector" class="mini-select" onchange="onLanguageChange()">
                <option value="en">EN</option>
                <option value="yo">YO</option>
                <option value="ig">IG</option>
                <option value="ha">HA</option>
                <option value="fr">FR</option>
                <option value="es">ES</option>
                <option value="ar">AR</option>
                <option value="sw">SW</option>
                <option value="pt">PT</option>
                <option value="de">DE</option>
                <option value="it">IT</option>
                <option value="ru">RU</option>
                <option value="zh">ZH</option>
                <option value="ja">JA</option>
                <option value="hi">HI</option>
            </select>
            <select id="voiceSelector" class="mini-select">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
            <div class="theme-toggle" onclick="toggleTheme()" id="themeToggle">
                <i class="fas fa-sun"></i>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="home-container">
                <div class="welcome-header">
                    <h2 class="main-title">Welcome to DOCMATE</h2>
                    <p class="subtitle">Your intelligent reading companion with voice notes and AI analysis</p>
                </div>

                <div class="upload-zone" onclick="document.getElementById('fileInput').click()" 
                     ondrop="handleFileDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload Your Document</h3>
                    <p class="upload-subtitle">Drag and drop your PDF, DOCX, or TXT file here</p>
                    <button class="btn-primary upload-btn">
                        <i class="fas fa-plus"></i>Choose File
                    </button>
                    <input type="file" id="fileInput" class="hidden" accept=".pdf,.docx,.txt,.doc" onchange="handleFileUpload(event)">
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <i class="fas fa-file-pdf feature-icon"></i>
                        <h3 class="feature-title">PDF Support</h3>
                        <p class="feature-desc">Full PDF rendering with proper content display</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-file-word feature-icon"></i>
                        <h3 class="feature-title">DOC/DOCX Files</h3>
                        <p class="feature-desc">Complete Microsoft Word document support</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-microphone feature-icon"></i>
                        <h3 class="feature-title">Voice Notes</h3>
                        <p class="feature-desc">Record audio notes with automatic saving</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-brain feature-icon"></i>
                        <h3 class="feature-title">AI Analysis</h3>
                        <p class="feature-desc">Get detailed explanations and summaries</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Document Reading Section -->
        <section id="reading" class="section">
            <div class="reading-container">
                <div class="document-header">
                    <button onclick="showSection('library')" class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h1 id="documentTitle" class="document-title">Document Title</h1>
                    <div class="reading-progress">
                        <span id="pageInfo">Page 1 of 1</span>
                    </div>
                </div>

                <div class="document-viewer" id="documentViewer">
                    <div id="documentContent" class="document-content">
                        <p>Document content will appear here...</p>
                    </div>
                </div>

                <!-- Audio Controls - Only show when document is loaded -->
                <div class="audio-controls" id="audioControls" style="display: none;">
                    <div class="audio-header">
                        <div class="headphone-icon" onclick="toggleAudioPanel()" title="Audio Controls">
                            <i class="fas fa-headphones"></i>
                        </div>
                        <span class="audio-status" id="audioStatus">Ready to play</span>
                    </div>
                    
                    <div class="audio-timeline" id="audioTimeline" style="display: none;">
                        <div class="timeline-container">
                            <button class="timeline-play-btn" onclick="togglePlayback()" id="timelinePlayBtn">
                                <i class="fas fa-play"></i>
                            </button>
                            <div class="timeline-bar" onclick="seekAudio(event)">
                                <div class="timeline-progress" id="timelineProgress"></div>
                                <div class="timeline-handle" id="timelineHandle"></div>
                            </div>
                            <span class="timeline-time" id="timelineTime">0:00 / 0:00</span>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="document-navigation">
                    <button onclick="previousPage()" id="prevBtn" class="nav-btn">
                        <i class="fas fa-chevron-left"></i>Previous
                    </button>
                    <button onclick="nextPage()" id="nextBtn" class="nav-btn">
                        Next<i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Library Section -->
        <section id="library" class="section">
            <div class="section-header">
                <h2 class="section-title">My Library</h2>
                <button onclick="document.getElementById('fileInput').click()" class="btn-primary">
                    <i class="fas fa-plus"></i>Add Book
                </button>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="librarySearchInput" class="search-input" 
                           placeholder="Search your library..." oninput="searchLibrary()">
                    <button onclick="clearLibrarySearch()" class="clear-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div id="libraryGrid" class="library-grid">
                <div class="empty-state">
                    <i class="fas fa-book empty-icon"></i>
                    <h3 class="empty-title">No books yet</h3>
                    <p class="empty-desc">Upload your first document to get started</p>
                </div>
            </div>
        </section>

        <!-- Saved Notes Section -->
        <section id="saved-notes" class="section">
            <div class="section-header">
                <h2 class="section-title">Saved Notes</h2>
                <div class="notes-actions">
                    <button onclick="addNewNote()" class="add-note-btn" title="Add Note">
                        <i class="fas fa-plus"></i>
                    </button>
                    <span id="notesCount" class="count-badge">0 notes</span>
                </div>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="notesSearchInput" class="search-input" 
                           placeholder="Search your notes..." oninput="searchNotes()">
                    <button onclick="clearNotesSearch()" class="clear-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div id="savedNotesList" class="notes-grid">
                <div class="empty-state">
                    <i class="fas fa-sticky-note empty-icon"></i>
                    <h3 class="empty-title">No saved notes yet</h3>
                    <p class="empty-desc">Start reading and add notes to your documents</p>
                </div>
            </div>
        </section>

        <!-- Audio Library Section -->
        <section id="audio-library" class="section">
            <div class="section-header">
                <h2 class="section-title">Audio Notes</h2>
                <span id="audioCount" class="count-badge">0 recordings</span>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="audioSearchInput" class="search-input" 
                           placeholder="Search audio notes..." oninput="searchAudioNotes()">
                    <button onclick="clearAudioSearch()" class="clear-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div id="audioNotesGrid" class="audio-grid">
                <div class="empty-state">
                    <i class="fas fa-microphone empty-icon"></i>
                    <h3 class="empty-title">No audio notes yet</h3>
                    <p class="empty-desc">Start reading and record your thoughts</p>
                </div>
            </div>
        </section>

        <!-- Analysis Section -->
        <section id="analysis" class="section">
            <div class="section-header">
                <h2 class="section-title">AI Document Analysis</h2>
                <button onclick="document.getElementById('analysisFileInput').click()" class="btn-primary">
                    <i class="fas fa-upload"></i>Analyze Document
                </button>
                <input type="file" id="analysisFileInput" class="hidden" accept=".pdf,.docx,.txt,.doc" onchange="analyzeDocument(event)">
            </div>

            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" class="search-input" 
                           placeholder="Ask any question or search for information..." onkeypress="handleSearchEnter(event)">
                    <button onclick="searchWebAnswer()" class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            
            <div id="analysisResults" class="analysis-results">
                <div class="empty-state">
                    <i class="fas fa-chart-line empty-icon"></i>
                    <h3 class="empty-title">No analysis yet</h3>
                    <p class="empty-desc">Upload a document or ask a question to see AI-powered insights</p>
                </div>
            </div>
        </section>

        <!-- Camera Section -->
        <section id="camera" class="section">
            <div class="section-header">
                <h2 class="section-title">Camera & OCR</h2>
                <div class="camera-actions">
                    <button onclick="startCamera()" class="btn-primary" id="startCameraBtn">
                        <i class="fas fa-camera"></i>Start Camera
                    </button>
                    <button onclick="stopCamera()" class="btn-secondary" id="stopCameraBtn" style="display: none;">
                        <i class="fas fa-stop"></i>Stop Camera
                    </button>
                </div>
            </div>

            <div class="camera-container">
                <video id="cameraVideo" class="camera-video" autoplay playsinline style="display: none;"></video>
                <canvas id="cameraCanvas" class="camera-canvas" style="display: none;"></canvas>
                
                <div class="camera-placeholder" id="cameraPlaceholder">
                    <i class="fas fa-camera camera-placeholder-icon"></i>
                    <h3 class="camera-placeholder-title">Camera Ready</h3>
                    <p class="camera-placeholder-desc">Click "Start Camera" to begin capturing documents</p>
                </div>

                <div class="camera-controls" id="cameraControls" style="display: none;">
                    <button onclick="captureImage()" class="capture-btn">
                        <i class="fas fa-camera"></i>Capture
                    </button>
                </div>
            </div>

            <div class="captured-images" id="capturedImages">
                <h3 class="captured-title">Captured Documents</h3>
                <div id="imageGallery" class="image-gallery">
                    <div class="empty-state">
                        <i class="fas fa-images empty-icon"></i>
                        <h3 class="empty-title">No images captured yet</h3>
                        <p class="empty-desc">Use the camera to capture documents for OCR processing</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quiz" class="section">
            <div class="section-header">
                <h2 class="section-title">Weekly Quiz</h2>
                <div class="quiz-info">
                    <span id="quizScore" class="score-badge">Score: 0/0</span>
                </div>
            </div>

            <div id="quizContainer" class="quiz-container">
                <div class="empty-state">
                    <i class="fas fa-question-circle empty-icon"></i>
                    <h3 class="empty-title">No quiz available</h3>
                    <p class="empty-desc">Upload documents to generate quiz questions</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Quick Note Panel -->
    <div class="quick-note-panel" id="quickNotePanel">
        <div class="quick-note-header">
            <h3>Quick Note</h3>
            <button onclick="closeQuickNote()" class="close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <textarea id="quickNoteInput" class="quick-note-input" placeholder="Write your note here..."></textarea>
        <div class="quick-note-actions">
            <button onclick="saveQuickNote()" class="btn-primary">
                <i class="fas fa-save"></i>Save Note
            </button>
        </div>
    </div>

    <!-- Floating Action Buttons -->
    <div class="floating-actions">
        <button class="fab record-fab" onclick="toggleRecording()" id="recordFab" title="Record Audio Note">
            <i class="fas fa-microphone"></i>
        </button>
        <button class="fab note-fab" onclick="showQuickNote()" title="Quick Note">
            <i class="fas fa-sticky-note"></i>
        </button>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loadingText">Processing...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mammoth@1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
    <script src="api.js"></script>
    <script src="camera.js"></script>
    <script src="audio.js"></script>
    <script src="script.js"></script>
</body>
</html>
